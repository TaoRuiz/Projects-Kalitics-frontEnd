<h1 class="alert-title mb-5 text-center">
  {{
    !user
      ? "Nouvel utilisateur"
      : "Modification de " + user.firstName + " " + user.lastName
  }}
</h1>

<form [formGroup]="form" (ngSubmit)="handleSubmit()" class="w-75 mx-auto">
  <legend>Informations</legend>
  <div class="row p-5">
    <div class="col-3 d-flex flex-column justify-content-around">
      <img
        *ngIf="this.form"
        src="/assets/img/avatars/{{ this.form.get('avatar').value }}"
        alt="Avatar de {{ user?.firstName }}"
        class="img w-75 mx-auto mb-3"
      />
      <div class="form-group">
        <label class="d-block text-center">Avatar</label>
        <select formControlName="avatar" class="form-control">
          <option *ngFor="let a of avatars" [ngValue]="a.value">{{
            a.title
          }}</option>
        </select>
      </div>
    </div>
    <div class="offset-1 col d-flex flex-column justify-content-between">
      <div class="form-group">
        <label>Nom</label>
        <input
          type="text"
          class="form-control"
          placeholder="Nom"
          formControlName="lastName"
        />
      </div>
      <div class="form-group">
        <label>Prénom</label>
        <input
          type="text"
          class="form-control"
          placeholder="Prénom"
          formControlName="firstName"
        />
      </div>
      <div class="form-group">
        <label>Email</label>
        <input
          type="text"
          class="form-control"
          placeholder="Email"
          formControlName="email"
        />
      </div>
    </div>
  </div>
  <legend>Attributions</legend>
  <div class="p-5">
    <div class="form-group">
      <label>Fonction</label>
      <select class="form-control" formControlName="position">
        <option [ngValue]="p.id" *ngFor="let p of positions">{{
          p.title
        }}</option>
      </select>
    </div>
    <div class="form-group">
      <label class="d-block">Rôle(s)</label>
      <select formControlName="roles" class="form-control" multiple>
        <option *ngFor="let r of roles" [ngValue]="r.id">{{ r.title }}</option>
      </select>
    </div>
  </div>
  <div class="d-flex justify-content-center">
    <button class="btn btn-success mx-2">Enregistrer</button>
    <a href="#" routerLink="/users/list" class="btn btn-danger mx-2">Annuler</a>
  </div>
</form>
